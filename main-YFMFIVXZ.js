import{$ as U,A as x,B as N,D as V,E as A,F as k,G as o,H as n,I as p,J as g,K as h,L as S,M as b,N as r,O as L,P as R,R as m,T as W,X as $,Y as j,Z as O,_ as B,aa as q,ca as _,da as G,ea as J,i as F,l as M,m as c,q as d,r as f,v as s,w as v,y as H}from"./chunk-QM5B5EMP.js";var C=class t{constructor(i){this.http=i}apiUrl="https://tecweb-project.duckdns.org";obtenerPeliculaPorId(i){return this.http.get(`${this.apiUrl}/movie/${i}`)}buscarPeliculasPorTitulo(i){return this.http.get(`${this.apiUrl}/search?q=${i}`)}agregarPeliculaAWachlist(i,e,a){let l=new j().set("user_id",i.toString()).set("movie_id",e.toString()).set("watched",a.toString());return this.http.post(`${this.apiUrl}/watchlist`,{},{params:l})}static \u0275fac=function(e){return new(e||t)(M(O))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var ee=(t,i)=>i.title,te=(t,i)=>i.name;function ie(t,i){if(t&1&&(o(0,"div"),r(1),n()),t&2){let e=i.$implicit;s(),R(" ",e.name," ")}}function ne(t,i){if(t&1&&(o(0,"p"),r(1),n(),o(2,"p"),r(3),n(),o(4,"strong"),r(5,"G\xE9neros:"),n(),A(6,ie,2,1,"div",null,te)),t&2){let e=i.$implicit;s(),L(e.title),s(2),L(e.overview),s(3),k(e.genres)}}function oe(t,i){if(t&1&&(o(0,"h2"),r(1,"Resultados de la b\xFAsqueda:"),n(),A(2,ne,8,2,null,null,ee)),t&2){let e=S();s(2),k(e.movies)}}function re(t,i){t&1&&(o(0,"p"),r(1,"No se encontraron pel\xEDculas"),n())}var I=class t{constructor(i){this.peliculasService=i}movies;searchTitle="";obtenerPeliculas(){this.peliculasService.obtenerPeliculaPorId(2).subscribe(e=>{this.movies=e,console.log("Pel\xEDculas obtenidas:",this.movies)},e=>{console.error("Error al obtener pel\xEDculas:",e)})}buscarPeliculasPorTitulo(i){if(!i){console.error("El t\xEDtulo de la pel\xEDcula no puede estar vac\xEDo");return}this.peliculasService.buscarPeliculasPorTitulo(i).subscribe(e=>{this.movies=e,console.log("Pel\xEDculas encontradas:",this.movies)},e=>{console.error("Error al buscar pel\xEDculas:",e)})}static \u0275fac=function(e){return new(e||t)(v(C))};static \u0275cmp=c({type:t,selectors:[["app-movie-list"]],standalone:!0,features:[m],decls:11,vars:1,consts:[["titleInput",""],["for","title"],["type","text","id","title","placeholder","Escribe el t\xEDtulo de la pel\xEDcula"],[3,"click"]],template:function(e,a){if(e&1){let l=g();o(0,"div")(1,"label",1),r(2,"Buscar por t\xEDtulo:"),n(),p(3,"input",2,0),n(),o(5,"button",3),h("click",function(){d(l);let u=b(4);return f(a.buscarPeliculasPorTitulo(u.value))}),r(6,"Buscar"),n(),x(7,oe,4,0)(8,re,2,0,"p"),o(9,"p"),r(10,"Pel\xEDculas works!"),n()}e&2&&(s(7),V(a.movies&&a.movies.length>0?7:8))}})};var P=class t{constructor(i){this.peliculasService=i}agregarAWachlist(i,e,a,l){if(console.log("Formulario enviado"),i.preventDefault(),!e||!a){console.error("El ID del usuario y el ID de la pel\xEDcula son obligatorios.");return}let y=l==="true";this.peliculasService.agregarPeliculaAWachlist(e,a,y).subscribe(u=>{console.log("Pel\xEDcula agregada a la lista de seguimiento:",u),alert("Pel\xEDcula agregada con \xE9xito."),this.limpiarFormulario()},u=>{console.error("Error al agregar a la lista de seguimiento:",u),alert("Ocurri\xF3 un error al agregar la pel\xEDcula.")})}limpiarFormulario(){}static \u0275fac=function(e){return new(e||t)(v(C))};static \u0275cmp=c({type:t,selectors:[["app-add-watchlist"]],standalone:!0,features:[m],decls:27,vars:0,consts:[["userIdInput",""],["movieIdInput",""],["watchedInput",""],["for","userId"],["type","number","id","userId","placeholder","Ingrese el ID del usuario","required",""],["for","movieId"],["type","number","id","movieId","placeholder","Ingrese el ID de la pel\xEDcula","required",""],["for","watched"],["id","watched"],["value","true"],["value","false"],["type","button",3,"click"]],template:function(e,a){if(e&1){let l=g();o(0,"div")(1,"h2"),r(2,"Agregar Pel\xEDcula a la Lista de Seguimiento"),n(),o(3,"form")(4,"div")(5,"label",3),r(6,"ID de Usuario:"),n(),p(7,"input",4,0),n(),o(9,"div")(10,"label",5),r(11,"ID de Pel\xEDcula:"),n(),p(12,"input",6,1),n(),o(14,"div")(15,"label",7),r(16,"\xBFVista?"),n(),o(17,"select",8,2)(19,"option",9),r(20,"S\xED"),n(),o(21,"option",10),r(22,"No"),n()()(),o(23,"button",11),h("click",function(u){d(l);let Q=b(8),X=b(13),Y=b(18);return f(a.agregarAWachlist(u,+Q.value,+X.value,Y.value))}),r(24,"Agregar"),n()()(),o(25,"p"),r(26,"add-watchlist works!"),n()}}})};var z=[{path:"buscar-peliculas",component:I},{path:"agregar-peliculas",component:P},{path:"register",loadComponent:()=>import("./chunk-TMUJPM5R.js").then(t=>t.RegisterComponent)},{path:"login",loadComponent:()=>import("./chunk-LITBF37Q.js").then(t=>t.LoginComponent)},{path:"*",redirectTo:"login"}];var K={providers:[W({eventCoalescing:!0}),G(z),B()]};function ae(t,i){if(t&1){let e=g();o(0,"button",4),h("click",function(){d(e);let l=S();return f(l.logout())}),r(1,"Logout"),n()}}var w=class t{constructor(i){this.authService=i}isAuthenticated=H(!1);ngOnInit(){this.isAuthenticated.set(this.authService.isAuthenticated())}logout(){this.authService.logout(),this.isAuthenticated.set(!1)}static \u0275fac=function(e){return new(e||t)(v(J))};static \u0275cmp=c({type:t,selectors:[["app-header"]],standalone:!0,features:[m],decls:6,vars:1,consts:[[1,"bg-gray-800","p-4","text-white"],[1,"container","mx-auto","flex","justify-between","items-center"],["routerLink","/",1,"text-xl","font-bold"],["class","text-sm underline",3,"click",4,"ngIf"],[1,"text-sm","underline",3,"click"]],template:function(e,a){e&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"MyApp"),n(),o(4,"div"),x(5,ae,2,0,"button",3),n()()()),e&2&&(s(5),N("ngIf",a.isAuthenticated()))},dependencies:[_,$]})};var D=class t{title="frontend";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-root"]],standalone:!0,features:[m],decls:13,vars:0,consts:[["routerLink","/buscar-peliculas"],["routerLink","/agregar-peliculas",2,"margin-left","20px"],["routerLink","/register",2,"margin-left","20px"],["routerLink","/login",2,"margin-left","20px"]],template:function(e,a){e&1&&(o(0,"div")(1,"h1"),r(2,"Gesti\xF3n de Pel\xEDculas"),n(),p(3,"app-header"),o(4,"a",0),r(5,"Buscar Pel\xEDculas"),n(),o(6,"a",1),r(7,"Agregar Pel\xEDcula"),n(),o(8,"a",2),r(9,"Registrarse"),n(),o(10,"a",3),r(11,"Login"),n(),p(12,"router-outlet"),n())},dependencies:[q,_,w]})};U(D,K).catch(t=>console.error(t));
